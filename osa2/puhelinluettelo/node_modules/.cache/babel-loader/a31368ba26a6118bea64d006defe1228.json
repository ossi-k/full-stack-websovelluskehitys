{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ossik\\\\opiskelu\\\\full-stack-websovelluskehitys\\\\osa2\\\\puhelinluettelo\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport personService from './services/persons';\n\nconst cors = require('cors');\n\napp.use(cors());\n\nconst App = () => {\n  const [persons, setPersons] = useState([{\n    name: 'Arto Hellas',\n    number: '040-1231244'\n  }]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, []);\n  console.log('render', persons.length, 'persons');\n\n  const addPerson = event => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber\n    };\n    const duplicate = persons.find(person => personObject.name === person.name);\n\n    if (persons.includes(duplicate)) {\n      // window.alert(`${newName} is already added to phonebook`)\n      let duplicateID = duplicate.id;\n\n      if (window.confirm(`${duplicate.name} is already added to the phonebook, replace the old number with a new one?`)) {\n        axios.put(`http://localhost:3001/persons/${duplicateID}`, personObject);\n        window.location.reload();\n      }\n    } else {\n      personService.create(personObject).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n      });\n    }\n  };\n\n  const removePerson = name => {\n    if (window.confirm(`Delete ${name}?`)) {\n      const newPersons = persons.filter(item => item.name !== name);\n      let id = persons.find(item => item.name === name).id;\n      setPersons(newPersons);\n      personService.remove(id);\n    }\n  };\n\n  const handlePersonChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, \"Phonebook\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: addPerson,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"name: \", /*#__PURE__*/React.createElement(\"input\", {\n    value: newName,\n    onChange: handlePersonChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, \"number: \", /*#__PURE__*/React.createElement(\"input\", {\n    value: newNumber,\n    onChange: handleNumberChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 22\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"add\"))), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, \"Numbers\"), /*#__PURE__*/React.createElement(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, persons.map(person => /*#__PURE__*/React.createElement(\"a\", {\n    key: person.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, person.name, \", \", \" \", person.number, \", \", \" \", /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    onClick: () => removePerson(person.name),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"remove\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  })))));\n};\n\nexport default App;","map":{"version":3,"sources":["C:/Users/ossik/opiskelu/full-stack-websovelluskehitys/osa2/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","axios","personService","cors","require","app","use","App","persons","setPersons","name","number","newName","setNewName","newNumber","setNewNumber","getAll","then","initialPersons","console","log","length","addPerson","event","preventDefault","personObject","duplicate","find","person","includes","duplicateID","id","window","confirm","put","location","reload","create","returnedPerson","concat","removePerson","newPersons","filter","item","remove","handlePersonChange","target","value","handleNumberChange","map"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;;AACA,MAAMC,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AAEAC,GAAG,CAACC,GAAJ,CAAQH,IAAI,EAAZ;;AAEA,MAAMI,GAAG,GAAG,MAAM;AAChB,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,CACrC;AACEW,IAAAA,IAAI,EAAE,aADR;AAEEC,IAAAA,MAAM,EAAE;AAFV,GADqC,CAAD,CAAtC;AAOA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACe,SAAD,EAAYC,YAAZ,IAA4BhB,QAAQ,CAAC,EAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,aAAa,CACVc,MADH,GAEGC,IAFH,CAEQC,cAAc,IAAI;AACtBT,MAAAA,UAAU,CAACS,cAAD,CAAV;AACD,KAJH;AAIK,GALE,EAKA,EALA,CAAT;AAOAC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBZ,OAAO,CAACa,MAA9B,EAAsC,SAAtC;;AAEA,QAAMC,SAAS,GAAIC,KAAD,IAAW;AAE3BA,IAAAA,KAAK,CAACC,cAAN;AACA,UAAMC,YAAY,GAAG;AACnBf,MAAAA,IAAI,EAAEE,OADa;AAEnBD,MAAAA,MAAM,EAAEG;AAFW,KAArB;AAKA,UAAMY,SAAS,GAAGlB,OAAO,CAACmB,IAAR,CAAaC,MAAM,IAAIH,YAAY,CAACf,IAAb,KAAsBkB,MAAM,CAAClB,IAApD,CAAlB;;AAEA,QAAIF,OAAO,CAACqB,QAAR,CAAiBH,SAAjB,CAAJ,EAAiC;AAC/B;AACA,UAAII,WAAW,GAAGJ,SAAS,CAACK,EAA5B;;AACA,UAAIC,MAAM,CAACC,OAAP,CAAgB,GAAEP,SAAS,CAAChB,IAAK,4EAAjC,CAAJ,EAAmH;AACjHT,QAAAA,KAAK,CACFiC,GADH,CACQ,iCAAgCJ,WAAY,EADpD,EACuDL,YADvD;AAEEO,QAAAA,MAAM,CAACG,QAAP,CAAgBC,MAAhB;AACH;AACF,KARD,MAQO;AACLlC,MAAAA,aAAa,CACVmC,MADH,CACUZ,YADV,EAEGR,IAFH,CAEQqB,cAAc,IAAI;AACtB7B,QAAAA,UAAU,CAACD,OAAO,CAAC+B,MAAR,CAAeD,cAAf,CAAD,CAAV;AACD,OAJH;AAKD;AACF,GAzBD;;AA2BA,QAAME,YAAY,GAAI9B,IAAD,IAAU;AAE7B,QAAGsB,MAAM,CAACC,OAAP,CAAgB,UAASvB,IAAK,GAA9B,CAAH,EAAsC;AACpC,YAAM+B,UAAU,GAAGjC,OAAO,CAACkC,MAAR,CAAgBC,IAAD,IAAUA,IAAI,CAACjC,IAAL,KAAcA,IAAvC,CAAnB;AACA,UAAIqB,EAAE,GAAGvB,OAAO,CAACmB,IAAR,CAAcgB,IAAD,IAAUA,IAAI,CAACjC,IAAL,KAAcA,IAArC,EAA2CqB,EAApD;AACAtB,MAAAA,UAAU,CAACgC,UAAD,CAAV;AAEAvC,MAAAA,aAAa,CAAC0C,MAAd,CAAqBb,EAArB;AACD;AACF,GATD;;AAWA,QAAMc,kBAAkB,GAAItB,KAAD,IAAW;AACpCV,IAAAA,UAAU,CAACU,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAV;AACD,GAFD;;AAIA,QAAMC,kBAAkB,GAAIzB,KAAD,IAAW;AACpCR,IAAAA,YAAY,CAACQ,KAAK,CAACuB,MAAN,CAAaC,KAAd,CAAZ;AACD,GAFD;;AAKA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,eAEE;AAAM,IAAA,QAAQ,EAAEzB,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACQ;AAAO,IAAA,KAAK,EAAEV,OAAd;AACJ,IAAA,QAAQ,EAAEiC,kBADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADR,CADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAa;AAAO,IAAA,KAAK,EAAE/B,SAAd;AACX,IAAA,QAAQ,EAAEkC,kBADC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAb,CANF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADF,CAVF,CAFF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAhBF,eAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGxC,OAAO,CAACyC,GAAR,CAAYrB,MAAM,iBACjB;AAAG,IAAA,GAAG,EAAEA,MAAM,CAAClB,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGkB,MAAM,CAAClB,IADV,QACkB,GADlB,EAEGkB,MAAM,CAACjB,MAFV,QAEoB,GAFpB,eAGE;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAI,MAAM6B,YAAY,CAACZ,MAAM,CAAClB,IAAR,CAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADD,CADH,CAjBF,CADF;AAiCD,CApGD;;AAsGA,eAAeH,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport personService from './services/persons'\r\nconst cors = require('cors')\r\n\r\napp.use(cors())\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([\r\n    {\r\n      name: 'Arto Hellas',\r\n      number: '040-1231244'\r\n    }\r\n  ])\r\n\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })}, [])\r\n\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  const addPerson = (event) => {\r\n\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const duplicate = persons.find(person => personObject.name === person.name)\r\n\r\n    if (persons.includes(duplicate)) {\r\n      // window.alert(`${newName} is already added to phonebook`)\r\n      let duplicateID = duplicate.id\r\n      if (window.confirm(`${duplicate.name} is already added to the phonebook, replace the old number with a new one?`)) {\r\n        axios\r\n          .put(`http://localhost:3001/persons/${duplicateID}`, personObject)\r\n          window.location.reload()\r\n      }\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (name) => {\r\n\r\n    if(window.confirm(`Delete ${name}?`)) {\r\n      const newPersons = persons.filter((item) => item.name !== name)\r\n      let id = persons.find((item) => item.name === name).id\r\n      setPersons(newPersons)\r\n\r\n      personService.remove(id)\r\n    }\r\n  }\r\n\r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName}\r\n            onChange={handlePersonChange}\r\n          />\r\n        </div>\r\n        <div>number: <input value={newNumber}\r\n          onChange={handleNumberChange}\r\n        />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      <a>\r\n        {persons.map(person =>\r\n          <a key={person.name}>\r\n            {person.name}, {\" \"}\r\n            {person.number}, {\" \"}\r\n            <button type=\"button\" onClick ={ () => removePerson(person.name)}>\r\n              remove\r\n            </button>\r\n            <br/>\r\n          </a>\r\n        )}\r\n      </a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}