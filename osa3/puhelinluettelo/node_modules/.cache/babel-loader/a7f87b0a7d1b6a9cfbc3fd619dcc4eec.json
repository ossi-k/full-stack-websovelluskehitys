{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\ossik\\\\opiskelu\\\\full-stack-websovelluskehitys\\\\osa2\\\\puhelinluettelo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import personService from'./services/persons';var App=function App(){var _useState=useState([{name:'Arto Hellas',number:'040-1231244'}]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);console.log('render',persons.length,'persons');var addPerson=function addPerson(event){event.preventDefault();var personObject={name:newName,number:newNumber};var duplicate=persons.find(function(person){return personObject.name===person.name;});if(persons.includes(duplicate)){// window.alert(`${newName} is already added to phonebook`)\nvar duplicateID=duplicate.id;if(window.confirm(\"\".concat(duplicate.name,\" is already added to the phonebook, replace the old number with a new one?\"))){axios.put(\"/api/persons/\".concat(duplicateID),personObject);window.location.reload();}}else{personService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));});}};var removePerson=function removePerson(name){if(window.confirm(\"Delete \".concat(name,\"?\"))){var newPersons=persons.filter(function(item){return item.name!==name;});var id=persons.find(function(item){return item.name===name;}).id;setPersons(newPersons);personService.remove(id);}};var handlePersonChange=function handlePersonChange(event){setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){setNewNumber(event.target.value);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:addPerson},/*#__PURE__*/React.createElement(\"div\",null,\"name: \",/*#__PURE__*/React.createElement(\"input\",{value:newName,onChange:handlePersonChange})),/*#__PURE__*/React.createElement(\"div\",null,\"number: \",/*#__PURE__*/React.createElement(\"input\",{value:newNumber,onChange:handleNumberChange})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"add\"))),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),/*#__PURE__*/React.createElement(\"a\",null,persons.map(function(person){return/*#__PURE__*/React.createElement(\"a\",{key:person.name},person.name,\", \",\" \",person.number,\", \",\" \",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:function onClick(){return removePerson(person.name);}},\"remove\"),/*#__PURE__*/React.createElement(\"br\",null));})));};export default App;","map":{"version":3,"sources":["C:/Users/ossik/opiskelu/full-stack-websovelluskehitys/osa2/puhelinluettelo/src/App.js"],"names":["React","useState","useEffect","axios","personService","App","name","number","persons","setPersons","newName","setNewName","newNumber","setNewNumber","getAll","then","initialPersons","console","log","length","addPerson","event","preventDefault","personObject","duplicate","find","person","includes","duplicateID","id","window","confirm","put","location","reload","create","returnedPerson","concat","removePerson","newPersons","filter","item","remove","handlePersonChange","target","value","handleNumberChange","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport personService from './services/persons'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([\r\n    {\r\n      name: 'Arto Hellas',\r\n      number: '040-1231244'\r\n    }\r\n  ])\r\n\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })}, [])\r\n\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  const addPerson = (event) => {\r\n\r\n    event.preventDefault()\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    const duplicate = persons.find(person => personObject.name === person.name)\r\n\r\n    if (persons.includes(duplicate)) {\r\n      // window.alert(`${newName} is already added to phonebook`)\r\n      let duplicateID = duplicate.id\r\n      if (window.confirm(`${duplicate.name} is already added to the phonebook, replace the old number with a new one?`)) {\r\n        axios\r\n          .put(`/api/persons/${duplicateID}`, personObject)\r\n          window.location.reload()\r\n      }\r\n    } else {\r\n      personService\r\n        .create(personObject)\r\n        .then(returnedPerson => {\r\n          setPersons(persons.concat(returnedPerson))\r\n        })\r\n    }\r\n  }\r\n\r\n  const removePerson = (name) => {\r\n\r\n    if(window.confirm(`Delete ${name}?`)) {\r\n      const newPersons = persons.filter((item) => item.name !== name)\r\n      let id = persons.find((item) => item.name === name).id\r\n      setPersons(newPersons)\r\n\r\n      personService.remove(id)\r\n    }\r\n  }\r\n\r\n  const handlePersonChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name: <input value={newName}\r\n            onChange={handlePersonChange}\r\n          />\r\n        </div>\r\n        <div>number: <input value={newNumber}\r\n          onChange={handleNumberChange}\r\n        />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n      <h2>Numbers</h2>\r\n      <a>\r\n        {persons.map(person =>\r\n          <a key={person.name}>\r\n            {person.name}, {\" \"}\r\n            {person.number}, {\" \"}\r\n            <button type=\"button\" onClick ={ () => removePerson(person.name)}>\r\n              remove\r\n            </button>\r\n            <br/>\r\n          </a>\r\n        )}\r\n      </a>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}